(function(t){function e(e){for(var n,o,r=e[0],l=e[1],c=e[2],d=0,g=[];d<r.length;d++)o=r[d],s[o]&&g.push(s[o][0]),s[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(g.length)g.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==s[l]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},s={app:0},i=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/wms/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"2fe3":function(t,e,a){"use strict";var n=a("c325"),s=a.n(n);s.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var n=a("a026"),s=a("bb71");a("da64");n["a"].use(s["a"],{iconfont:"md"});var i=a("d225"),o=a("b0b4"),r=(a("ac6a"),a("308d")),l=a("6bb5"),c=a("4e2b"),u=a("6983"),d=a.n(u),g=function(t){function e(t){var a;return Object(i["a"])(this,e),a=Object(r["a"])(this,Object(l["a"])(e).call(this)),a.items=t||[],a}return Object(c["a"])(e,t),Object(o["a"])(e,[{key:"getList",value:function(){return this.items}},{key:"add",value:function(t){return this.items.push(t)}}]),e}(d.a),f=g,h=[{id:1,stage:1,time:2,task:{id:1}},{id:2,stage:1,time:3,task:{id:2}},{id:3,stage:0,time:4,task:{id:3}},{id:4,stage:3,time:2,task:{id:4}},{id:5,stage:1,time:2,task:{id:5}}],m=function(t){function e(t,a){var n;return Object(i["a"])(this,e),n=Object(r["a"])(this,Object(l["a"])(e).call(this,h)),n.stages=t,n.done=a,n}return Object(c["a"])(e,t),Object(o["a"])(e,[{key:"update",value:function(t){var e=this;this.items.forEach(function(a,n,s){s[n].task&&(s[n].time-=t,s[n].time<=0&&s[n].stage<e.stages.length&&(s[n].stage++,s[n].stage<e.stages.length&&(s[n].time=e.getTimeForStage(s[n].stage))),s[n].stage>=e.stages.length&&(e.emit("done",s[n].task),s[n].task=null,e.emit("ready",n)))})}},{key:"getTimeForStage",value:function(t){return this.stages[t].time*(1.5-Math.random())}},{key:"addTask",value:function(t){var e=t.nextTask,a=t.gateIndex;console.log("addTask",e,a,this.items[a].task),null===this.items[a].task&&(this.items[a].task=e,this.items[a].stage=0,this.items[a].time=this.getTimeForStage(0))}}]),e}(f),v=m,p=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(l["a"])(e).call(this,[{id:6},{id:7},{id:8},{id:9},{id:10}]))}return Object(c["a"])(e,t),Object(o["a"])(e,[{key:"getNext",value:function(){return console.log("getNext",this.items.length),this.items&&this.items.length?this.items.shift():null}}]),e}(f),b=p,k=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(l["a"])(e).call(this))}return Object(c["a"])(e,t),e}(f),_=k,y=function(){function t(){Object(i["a"])(this,t)}return Object(o["a"])(t,[{key:"getList",value:function(){return[{name:"Picking",time:4},{name:"Truck waiting",time:1},{name:"Loading",time:2},{name:"Sealing",time:1}]}}]),t}(),x=y,O=function(t){var e=function e(){t.update(.5),setTimeout(function(){e()},500)};e()},j=function(t){var e=t.task,a=t.doneModel;a.add(e)},M=function(t){var e=t.backlogModel,a=t.gateModel,n=t.gateIndex,s=e.getNext();a.addTask({nextTask:s,gateIndex:n})},w=function(){function t(){var e=this;Object(i["a"])(this,t),this.stageModel=new x,this.doneModel=new _,this.gateModel=new v(this.stageModel.getList()),this.gateModel.on("done",function(t){j({task:t,doneModel:e.doneModel})}),this.gateModel.on("ready",function(t){console.log("ready",t),M({gateIndex:t,gateModel:e.gateModel,backlogModel:e.backlogModel})}),this.backlogModel=new b}return Object(o["a"])(t,[{key:"getList",value:function(t){if(this["".concat(t,"Model")]&&this["".concat(t,"Model")].getList)return this["".concat(t,"Model")].getList();throw new Error("Model ".concat(t," doesn't registered"))}},{key:"start",value:function(){O(this.gateModel)}},{key:"done",value:function(t){j({task:t,doneModel:this.doneModel,backlogModel:this.backlogModel,gateModel:this.gateModel})}}]),t}(),C=w,S={install:function(t,e){t.prototype.$ctrl=e.ctrl}};n["a"].use(S,{ctrl:new C});var L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{dark:""}},[a("h1",[t._v('Visualization "How Warehouse works"')]),a("dashboard")],1)},T=[],$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("backlog",{staticClass:"clearfix",attrs:{items:t.backlog}}),a("v-layout",[a("v-flex",{attrs:{sm1:""}}),a("v-flex",{attrs:{sm11:""}},[a("h2",{staticClass:"text-md-center"},[t._v("Gates")])])],1),a("v-layout",[a("v-flex",{attrs:{sm1:""}},[a("h2",[t._v("Stages")]),a("stages",{attrs:{stages:t.stages}})],1),a("v-flex",{attrs:{sm11:""}},[a("gates",{attrs:{gates:t.gates,"stages-count":t.stages.length}})],1)],1),a("done",{attrs:{items:t.done}})],1)},D=[],V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-iterator",{attrs:{items:t.stages,"hide-actions":""},scopedSlots:t._u([{key:"item",fn:function(e){return a("div",{staticClass:"stage"},[t._v("\n    "+t._s(e.item.name)+"\n  ")])}}])})},E=[],G={name:"Stages",props:["stages"]},I=G,P=a("2877"),B=a("6544"),F=a.n(B),N=a("c377"),A=Object(P["a"])(I,V,E,!1,null,null,null);A.options.__file="Stages.vue";var H=A.exports;F()(A,{VDataIterator:N["a"]});var J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",t._l(t.gates,function(e){return a("v-flex",{key:e.id},[a("gate",{attrs:{gate:e,stagesCount:t.stagesCount}})],1)}),1)},z=[],W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",{staticClass:"text-md-center"},[t._v(t._s(t.gate.id))]),a("v-data-iterator",{staticClass:"gate",attrs:{items:t.items,"hide-actions":""},scopedSlots:t._u([{key:"item",fn:function(e){return a("v-card",{},[a("p",{staticClass:"text-md-center",domProps:{innerHTML:t._s(e.item)}})])}}])})],1)},q=[],K={name:"Gate",props:["gate","stagesCount"],computed:{items:function(){for(var t=[],e=0;e<this.stagesCount;e++)this.gate.stage===e&&this.gate.task?t.push(this.gate.task.id):t.push("&nbsp;");return t}}},Q=K,R=a("b0af"),U=Object(P["a"])(Q,W,q,!1,null,null,null);U.options.__file="Gate.vue";var X=U.exports;F()(U,{VCard:R["a"],VDataIterator:N["a"]});var Y={name:"Gates",props:["gates","stagesCount"],components:{Gate:X}},Z=Y,tt=a("0e8f"),et=a("a722"),at=Object(P["a"])(Z,J,z,!1,null,null,null);at.options.__file="Gates.vue";var nt=at.exports;F()(at,{VFlex:tt["a"],VLayout:et["a"]});var st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v("Backlog")]),a("v-layout",[a("v-flex",{attrs:{sm1:""}},[a("v-data-iterator",{staticClass:"backlog",attrs:{items:t.items,"hide-actions":""},scopedSlots:t._u([{key:"item",fn:function(e){return a("div",{staticClass:"backlog-item text-md-center"},[t._v("\n          "+t._s(e.item.id)+"\n        ")])}}])})],1),a("v-flex",{attrs:{sm11:""}},[a("v-data-iterator",{staticClass:"time-slots",attrs:{items:t.timeslots,"hide-actions":""},scopedSlots:t._u([{key:"item",fn:function(e){return a("div",{staticClass:"time-slot text-md-center"},[t._v("\n          "+t._s(e.item)+":00\n        ")])}}])})],1)],1)],1)},it=[],ot={name:"Backlog",props:["items"],computed:{timeslots:function(){return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]}}},rt=ot,lt=Object(P["a"])(rt,st,it,!1,null,null,null);lt.options.__file="Backlog.vue";var ct=lt.exports;F()(lt,{VDataIterator:N["a"],VFlex:tt["a"],VLayout:et["a"]});var ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v("Done")]),a("v-data-iterator",{staticClass:"backlog",attrs:{items:t.items,"hide-actions":""},scopedSlots:t._u([{key:"item",fn:function(e){return a("div",{staticClass:"backlog-item text-md-center"},[t._v("\n      "+t._s(e.item.id)+"\n      ")])}}])})],1)},dt=[],gt={name:"Done",props:["items"]},ft=gt,ht=Object(P["a"])(ft,ut,dt,!1,null,null,null);ht.options.__file="Done.vue";var mt=ht.exports;F()(ht,{VDataIterator:N["a"]});var vt={name:"Dashboard",components:{Stages:H,Gates:nt,Backlog:ct,Done:mt},data:function(){return{gates:[],done:[],backlog:[],stages:this.$ctrl.getList("stage")}},methods:{start:function(){this.getGates(),this.getDone(),this.getBacklog(),this.$ctrl.start()},getGates:function(){this.gates=this.$ctrl.getList("gate")},getDone:function(){this.done=this.$ctrl.getList("done")},getBacklog:function(){this.backlog=this.$ctrl.getList("backlog")}},created:function(){this.start()},destroyed:function(){}},pt=vt,bt=(a("2fe3"),Object(P["a"])(pt,$,D,!1,null,null,null));bt.options.__file="Dashboard.vue";var kt=bt.exports;F()(bt,{VFlex:tt["a"],VLayout:et["a"]});var _t={name:"app",components:{Dashboard:kt}},yt=_t,xt=a("7496"),Ot=Object(P["a"])(yt,L,T,!1,null,null,null);Ot.options.__file="App.vue";var jt=Ot.exports;F()(Ot,{VApp:xt["a"]}),n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(jt)}}).$mount("#app")},c325:function(t,e,a){}});
//# sourceMappingURL=app.f710d6b3.js.map